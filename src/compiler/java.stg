
/////////////////////////////////////////////////////////////////////////////////////////////////////
// DICTIONARIES /////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////

//[MJ] REVIEW (LOWER PRIORITY) -> array type
typeValue ::= [
   "number"	:"Double",
   "string"	:"String",
   "boolean":"Boolean",
   "void"	:"void",
   "id"		:"Double",
   ""		:"",
   default	:"null"
]

	
//[MJ] REVIEW 	-> ^
// 				-> <, and <= -> error
//				-> ( ) are needed?
operators ::= [
	"("		:"(",
	")"		:")",
   	"*"		:"*",
   	"/"		:"/",
   	"%"		:"%",
   	"+"		:"+",
   	"-"		:"-",
   	"=="	:"==",
   	"!="	:"!=",
   	"&&"	:"&&",
   	"||"	:"||",
   	"!"		:"!",
   default	:"" //because of assignments of vars already declared
]


//
booleanValue ::= [
	"false"	:"false",
	"true"	:"true",
	default:"null"
]


/////////////////////////////////////////////////////////////////////////////////////////////////////
// TEMPLATES ////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////

//[IJ] - DONE
statements(stat, controlflow) ::= <<
<stats(stat)><controlflowstats(controlflow)>
>>

// [MJ] DONE
stats(stat) ::= <<
<if(stat)> <stat:{s | <s>;} ; separator="\n"><endif>
>>

//[IJ] - DONE
controlflowstats(controlflow) ::= <<
<if(controlflow)><controlflow; separator="\n"><endif>
>>

//-------------------------------------------------------------------------------
//CLASS--------------------------------------------------------------------------
//-------------------------------------------------------------------------------

// [MJ] DONE
class(name,stat) ::= <<
public class <name> {
	<stats(stat)>
}
>>

//-------------------------------------------------------------------------------
//DECLARATION--------------------------------------------------------------------
//-------------------------------------------------------------------------------


// ARRAY DECLARATION--------------------------------------------------------------
/*
	ARRAYS WILL BE THE LAST ONES
	ARRAY '<' type ',' NUMBER'>' var
	arrayDeclaration(type, name, size) ::= <<
		<type> <name> [] = new <type> [<size>];
	>>
*/



//-------------------------------------------------------------------------------
//ASSIGNMENT---------------------------------------------------------------------
//-------------------------------------------------------------------------------

// VAR ASSIGNMENT----------------------------------------------------------------
//[MJ] DONE
varAssignment(type, var, stat) ::= <<
<typeValue.(type)> <var> = <stat>
>>

// ARRAY ASSIGNMENT--------------------------------------------------------------
/*arrayAssignment(type, var, stat) ::= <<

>>*/


//-------------------------------------------------------------------------------
//FUNCTION-----------------------------------------------------------------------
//-------------------------------------------------------------------------------

// FUNCTION MAIN------------------------------------------------------------------
main(stat, controlflow)::= <<
	public static void main(String[] args) {
		<statements(stat, controlflow)>
	}
>>


// FUNCTION ID--------------------------------------------------------------------
// [MJ] REVIEW (LOWER PRIORITY) -> args
function(name, return, arg) ::= <<
	public static <return> <name> ( <args(arg)> ) {
		<stats(stat)>
	}
>>



// [MJ] REVIEW (LOWER PRIORITY) -> problem with separator, if more than 1 arg, needs a comma, and i don't know how to implement it 
args(arg) ::= <<
<if(arg)><arg; separator=" "><endif>
>>

// FUNCTION CALL------------------------------------------------------------------


/*********************************************************************************
CONTROL FLOW**********************************************************************
*********************************************************************************/

// [IJ] DONE
// CONDITION----------------------------------------------------------------------
condition(stat, logicalOperation0, logicalOperation1, stat1, stat2, stat3) ::= << 
<stats(stat)>
<if(logicalOperation0)>if(<logicalOperation0>){
	<stats(stat1)>
}<if(stat2)>
else<if(logicalOperation1)> if(<logicalOperation1>){
	<stats(stat2)>
}<if(stat3)>
else {
	<stats(stat3)>
}<endif><else> {
	<stats(stat2)>
}<endif><elseif(stat3)>
else {
	<stats(stat3)>
}<endif><endif>	
>>

// [IJ] DONE
// FOR LOOP-----------------------------------------------------------------------
forLoop(firstAssig, logicalOperation, finalAssig, stat) ::= <<
for(<if(firstAssig)><firstAssig><endif>; <logicalOperation>; <finalAssig>) { 
	<stats(stat)>
}
>>

// [IJ] DONE
// WHILE LOOP---------------------------------------------------------------------
whileLoop(logicalOperation, stat) ::= <<
<if(stat)>while(<logicalOperation>){
<stats(stat)>
}<else>
while(<logicalOperation>);
<endif>	           
>>

// [IJ] NOT DONE YET...
// WHEN---------------------------------------------------------------------------
when(var, valueList, statList) ::= <<
switch(<var>){
	<statList: { s | <valueList: { v | <whenCase(v,s)> }> }>
	<whenCase2(value, stat)>
	default: break;
}
>>
whenCase(value, stat) ::= <<
case <value>: <if(stat)><stats(stat)> <\n>break;<\n> <endif>
>>

//-------------------------------------------------------------------------------
//LOGICAL OPERATIONS-------------------------------------------------------------
//-------------------------------------------------------------------------------

//[MJ] REVIEW -> parenthesis really necessary? not? use just comparison
logicalOperation( parenthesis0, logicalOperand0, operator, logicalOperand1, parenthesis1 ) ::= <<
<operators.(parenthesis0)> <logicalOperand0> <operators.(operator)> <logicalOperand1> <operators.(parenthesis1)>
>>


//[MJ] DONE
logicalOperand(not, operand) ::= <<
<operators.(not)><operand>
>>

//[MJ] DONE
comparison(operand0, compareOperator, operand1) ::= <<
<operand0> <compareOperator> <operand1>
>>


//-------------------------------------------------------------------------------
//OPERATIONS---------------------------------------------------------------------
//-------------------------------------------------------------------------------

//[MJ] DONE
operations(resultType, var, operand0, operation, operand1) ::= <<
<varAssignment(resultType, var, operationConcatenation(operand0, operation, operand1))>
>>

operationConcatenation(operand0, operation, operand1) ::= <<
<operand0><operation><operand1>
>>




//-------------------------------------------------------------------------------
//STRUCTURES---------------------------------------------------------------------
//-------------------------------------------------------------------------------

// ARRAY TYPE---------------------------------------------------------------------
arrayType(type) ::= "<type> []"

// ARRAY ACCESS-------------------------------------------------------------------
//...

// ARRAY LENGTH-------------------------------------------------------------------
arrayLength(var) ::= " <var>.length() "


//-------------------------------------------------------------------------------
//PRINTS-------------------------------------------------------------------------
//-------------------------------------------------------------------------------

//...


//-------------------------------------------------------------------------------
// VARS AND TYPES--------------------------------------------------------------------------
//------------------------------------------------------------------------------

//[MJ] DONE
varDeclaration(type, var) ::= <<
<type> <var>
>>

//[MJ] DONE
value(value) ::=<<
<value>
>>

//[MJ] DONE
type(type) ::=<<
<typeValue.(type)>
>>
